# Система автоматизированной экспертизы

Веб-приложение предназначено для организации аудита учебных работ в формате отдельных «комнат». Каждая комната хранит собственные инструкции проверки и аналитические параметры, обеспечивает загрузку архивов с материалами и при необходимости шаблонов документов. Конфигурация и файлы комнат изолированы друг от друга и не влияют на значения по умолчанию.

## Возможности

- Создание комнат проверки с кратким описанием задачи.
- Настройка индивидуальных промптов для анализа материалов.
- Восстановление промптов комнаты до глобального шаблона.
- Загрузка архивов в формате ZIP и отдельных файлов-шаблонов.
- Хранение загруженных материалов в выделённой директории комнаты.

## Запуск локально

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
flask --app app:create_app run --debug
```

После запуска пользовательский интерфейс доступен по адресу [http://localhost:5000](http://localhost:5000).

## Docker

В репозитории размещён образ, который запускает веб-приложение под управлением Gunicorn и параллельно инициирует OpenVPN-клиент с конфигурацией `client.ovpn`. Все исходящие сетевые запросы приложения направляются через VPN-соединение.

### Сборка образа

```bash
docker build -t auto-checker .
```

### Запуск контейнера

```bash
docker run \
  --cap-add=NET_ADMIN \
  --device /dev/net/tun \
  -p 9003:9003 \
  auto-checker
```

> **Важно:** для работы OpenVPN контейнеру необходим доступ к созданию интерфейса TUN. В примере выше права предоставляются с помощью `--cap-add=NET_ADMIN` и `--device /dev/net/tun`.

После запуска веб-приложение доступно по адресу [http://localhost:9003](http://localhost:9003).

## Тестовые материалы

Для проверки процесса загрузки архивов предусмотрен файл `ИИ_в_образовании_и_науке_Задание_№2_Исследование_применения_технологий.zip`,
который размещён в корне репозитория. Его можно выбрать при загрузке архива заданий в интерфейсе комнаты.

## Обработка PDF и нескольких документов

CLI‑проверка (`auto_checker.py`) обрабатывает `.pdf`, `.docx`, `.doc` и `onlinetext.html`. Если в папке студента несколько файлов, проверяются все; в `results/*.json` сохраняются результаты по каждому файлу, а в агрегированный `result.txt` попадает лучший итог (приоритет «зачтено», затем более поздняя дата). Итоговая ведомость создаётся в корне папки.

См. подробный гайд и офлайн‑тест с примером `example/ii.zip`: `docs/PDF_MULTI_GUIDE_RU.md`.
