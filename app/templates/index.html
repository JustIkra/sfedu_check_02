{% extends "base.html" %}

{% block title %}Auto Checker · Комнаты{% endblock %}

{% block content %}
<section class="hero">
  <div>
    <h2>Организуйте проверку работ в едином окне</h2>
    <p>
      Комната объединяет задания, критерии и промпт эксперта. Опишите контекст,
      загрузите архив с материалами и сформируйте отчёт по результатам проверки.
    </p>
  </div>
  <form method="post" class="card">
    <h3>Новая комната</h3>
    <label>
      Название
      <input type="text" name="name" required placeholder="Например, Поток 1 · контрольная">
    </label>
    <label>
      Краткое описание
      <input type="text" name="description" placeholder="Дисциплина, дата, формат">
    </label>
    <button type="submit">Создать</button>
  </form>
</section>

<section>
  <h2>Активные комнаты</h2>
  {% if rooms %}
    <div class="room-grid">
      {% for room in rooms %}
        <article class="card room-card">
          <header>
            <h3><a href="{{ url_for('main.room_detail', room_id=room.id) }}">{{ room.name }}</a></h3>
            <p class="meta">{{ room.created_at.strftime('%d.%m.%Y %H:%M') }}</p>
          </header>
          {% if room.description %}
            <p>{{ room.description }}</p>
          {% else %}
            <p class="muted">Добавьте описание, чтобы зафиксировать требования к заданию.</p>
          {% endif %}
        </article>
      {% endfor %}
    </div>
  {% else %}
    <p class="muted">Комнаты пока не созданы. Начните с формы выше, чтобы открыть первую.</p>
  {% endif %}
</section>

<section class="prompt-preview card">
  <h3>Промпт по умолчанию</h3>
  <p class="muted">Текст автоматически применяется при создании новой комнаты и дополняет инструкции автооценивания.</p>
  <pre>{{ default_room_prompt }}</pre>
</section>
{% endblock %}
